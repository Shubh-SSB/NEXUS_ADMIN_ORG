{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projekts/Projekts/NEXUS_ADMIN_ORG_GIT/components/snackbarprovider.tsx"],"sourcesContent":["\"use client\";\r\nimport { SnackbarProvider } from \"notistack\";\r\nimport React from \"react\";\r\n\r\nexport default function NotistackProvider({\r\n  children,\r\n}: {\r\n  children: React.ReactNode;\r\n}) {\r\n  return (\r\n    <SnackbarProvider\r\n      maxSnack={3}\r\n      anchorOrigin={{ vertical: \"top\", horizontal: \"right\" }}\r\n      autoHideDuration={3000}\r\n    >\r\n      {children}\r\n    </SnackbarProvider>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AADA;;;AAIe,SAAS,kBAAkB,EACxC,QAAQ,EAGT;IACC,qBACE,6LAAC,oKAAgB;QACf,UAAU;QACV,cAAc;YAAE,UAAU;YAAO,YAAY;QAAQ;QACrD,kBAAkB;kBAEjB;;;;;;AAGP;KAdwB"}},
    {"offset": {"line": 38, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projekts/Projekts/NEXUS_ADMIN_ORG_GIT/lib/auth.ts"],"sourcesContent":["/**\r\n * Auth utility functions for token management\r\n */\r\n\r\nexport const AUTH_TOKEN_KEY = 'admintoken';\r\n\r\n/**\r\n * Get the admin token from localStorage\r\n */\r\nexport const getAuthToken = (): string | null => {\r\n  if (typeof window === 'undefined') {\r\n    return null; // Server-side rendering\r\n  }\r\n  \r\n  try {\r\n    return localStorage.getItem(AUTH_TOKEN_KEY);\r\n  } catch (error) {\r\n    console.error('Error accessing localStorage:', error);\r\n    return null;\r\n  }\r\n};\r\n\r\n/**\r\n * Set the admin token in localStorage\r\n */\r\nexport const setAuthToken = (token: string): void => {\r\n  if (typeof window === 'undefined') {\r\n    return; // Server-side rendering\r\n  }\r\n  \r\n  try {\r\n    localStorage.setItem(AUTH_TOKEN_KEY, token);\r\n  } catch (error) {\r\n    console.error('Error setting localStorage:', error);\r\n  }\r\n};\r\n\r\n/**\r\n * Remove the admin token from localStorage\r\n */\r\nexport const removeAuthToken = (): void => {\r\n  if (typeof window === 'undefined') {\r\n    return; // Server-side rendering\r\n  }\r\n  \r\n  try {\r\n    localStorage.removeItem(AUTH_TOKEN_KEY);\r\n  } catch (error) {\r\n    console.error('Error removing from localStorage:', error);\r\n  }\r\n};\r\n\r\n/**\r\n * Check if user is authenticated (has valid token)\r\n */\r\nexport const isAuthenticated = (): boolean => {\r\n  const token = getAuthToken();\r\n  return Boolean(token && token.trim().length > 0);\r\n};\r\n\r\n/**\r\n * Clear all auth data (useful for logout)\r\n */\r\nexport const clearAuthData = (): void => {\r\n  removeAuthToken();\r\n  // Add any other cleanup logic here if needed\r\n};"],"names":[],"mappings":"AAAA;;CAEC;;;;;;;;;;;;;;AAEM,MAAM,iBAAiB;AAKvB,MAAM,eAAe;IAC1B;;IAIA,IAAI;QACF,OAAO,aAAa,OAAO,CAAC;IAC9B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,iCAAiC;QAC/C,OAAO;IACT;AACF;AAKO,MAAM,eAAe,CAAC;IAC3B;;IAIA,IAAI;QACF,aAAa,OAAO,CAAC,gBAAgB;IACvC,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,+BAA+B;IAC/C;AACF;AAKO,MAAM,kBAAkB;IAC7B;;IAIA,IAAI;QACF,aAAa,UAAU,CAAC;IAC1B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,qCAAqC;IACrD;AACF;AAKO,MAAM,kBAAkB;IAC7B,MAAM,QAAQ;IACd,OAAO,QAAQ,SAAS,MAAM,IAAI,GAAG,MAAM,GAAG;AAChD;AAKO,MAAM,gBAAgB;IAC3B;AACA,6CAA6C;AAC/C"}},
    {"offset": {"line": 98, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projekts/Projekts/NEXUS_ADMIN_ORG_GIT/components/auth/auth-context.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { createContext, useContext, useEffect, useState } from 'react';\r\nimport { isAuthenticated, getAuthToken, setAuthToken, clearAuthData } from '@/lib/auth';\r\n\r\ninterface AuthContextType {\r\n  isLoggedIn: boolean;\r\n  token: string | null;\r\n  login: (token: string) => void;\r\n  logout: () => void;\r\n  checkAuth: () => boolean;\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\r\n\r\ninterface AuthProviderProps {\r\n  children: React.ReactNode;\r\n}\r\n\r\nexport const AuthProvider: React.FC<AuthProviderProps> = ({ children }) => {\r\n  const [isLoggedIn, setIsLoggedIn] = useState<boolean>(false);\r\n  const [token, setToken] = useState<string | null>(null);\r\n  const [isInitialized, setIsInitialized] = useState<boolean>(false);\r\n\r\n  // Initialize auth state from localStorage\r\n  useEffect(() => {\r\n    const initializeAuth = () => {\r\n      const storedToken = getAuthToken();\r\n      const authenticated = isAuthenticated();\r\n      \r\n      setToken(storedToken);\r\n      setIsLoggedIn(authenticated);\r\n      setIsInitialized(true);\r\n    };\r\n\r\n    initializeAuth();\r\n  }, []);\r\n\r\n  const login = (newToken: string) => {\r\n    setAuthToken(newToken);\r\n    setToken(newToken);\r\n    setIsLoggedIn(true);\r\n  };\r\n\r\n  const logout = () => {\r\n    clearAuthData();\r\n    setToken(null);\r\n    setIsLoggedIn(false);\r\n  };\r\n\r\n  const checkAuth = (): boolean => {\r\n    const authenticated = isAuthenticated();\r\n    setIsLoggedIn(authenticated);\r\n    return authenticated;\r\n  };\r\n\r\n  const value: AuthContextType = {\r\n    isLoggedIn,\r\n    token,\r\n    login,\r\n    logout,\r\n    checkAuth,\r\n  };\r\n\r\n  // Don't render children until auth is initialized\r\n  if (!isInitialized) {\r\n    return null; // or a loading spinner if you prefer\r\n  }\r\n\r\n  return (\r\n    <AuthContext.Provider value={value}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useAuth = (): AuthContextType => {\r\n  const context = useContext(AuthContext);\r\n  if (context === undefined) {\r\n    throw new Error('useAuth must be used within an AuthProvider');\r\n  }\r\n  return context;\r\n};"],"names":[],"mappings":";;;;;;;AACA;AACA;;;AAFA;;;AAYA,MAAM,4BAAc,IAAA,8KAAa,EAA8B;AAMxD,MAAM,eAA4C,CAAC,EAAE,QAAQ,EAAE;;IACpE,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAU;IACtD,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAgB;IAClD,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,yKAAQ,EAAU;IAE5D,0CAA0C;IAC1C,IAAA,0KAAS;kCAAC;YACR,MAAM;yDAAiB;oBACrB,MAAM,cAAc,IAAA,8HAAY;oBAChC,MAAM,gBAAgB,IAAA,iIAAe;oBAErC,SAAS;oBACT,cAAc;oBACd,iBAAiB;gBACnB;;YAEA;QACF;iCAAG,EAAE;IAEL,MAAM,QAAQ,CAAC;QACb,IAAA,8HAAY,EAAC;QACb,SAAS;QACT,cAAc;IAChB;IAEA,MAAM,SAAS;QACb,IAAA,+HAAa;QACb,SAAS;QACT,cAAc;IAChB;IAEA,MAAM,YAAY;QAChB,MAAM,gBAAgB,IAAA,iIAAe;QACrC,cAAc;QACd,OAAO;IACT;IAEA,MAAM,QAAyB;QAC7B;QACA;QACA;QACA;QACA;IACF;IAEA,kDAAkD;IAClD,IAAI,CAAC,eAAe;QAClB,OAAO,MAAM,qCAAqC;IACpD;IAEA,qBACE,6LAAC,YAAY,QAAQ;QAAC,OAAO;kBAC1B;;;;;;AAGP;GAvDa;KAAA;AAyDN,MAAM,UAAU;;IACrB,MAAM,UAAU,IAAA,2KAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;IANa"}},
    {"offset": {"line": 188, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projekts/Projekts/NEXUS_ADMIN_ORG_GIT/components/auth/auth-guard.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useRouter, usePathname } from 'next/navigation';\r\nimport { useSnackbar } from 'notistack';\r\nimport { isAuthenticated } from '@/lib/auth';\r\nimport { useAuth } from './auth-context';\r\n\r\ninterface AuthGuardProps {\r\n  children: React.ReactNode;\r\n  fallback?: React.ReactNode;\r\n  redirectTo?: string;\r\n  showNotification?: boolean;\r\n  notificationMessage?: string;\r\n}\r\n\r\nexport const AuthGuard: React.FC<AuthGuardProps> = ({\r\n  children,\r\n  fallback = null,\r\n  redirectTo = '/login',\r\n  showNotification = true,\r\n  notificationMessage = 'Unauthorized! Please login first.',\r\n}) => {\r\n  const router = useRouter();\r\n  const pathname = usePathname();\r\n  const { enqueueSnackbar } = useSnackbar();\r\n  const { isLoggedIn, checkAuth } = useAuth();\r\n  const [isChecking, setIsChecking] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const performAuthCheck = () => {\r\n      // Skip auth check for login page\r\n      if (pathname === redirectTo) {\r\n        setIsChecking(false);\r\n        return;\r\n      }\r\n\r\n      const authenticated = checkAuth();\r\n      \r\n      if (!authenticated) {\r\n        if (showNotification) {\r\n          enqueueSnackbar(notificationMessage, { \r\n            variant: 'error',\r\n            preventDuplicate: true\r\n          });\r\n        }\r\n        \r\n        // Redirect to login page\r\n        router.replace(redirectTo);\r\n        return;\r\n      }\r\n      \r\n      setIsChecking(false);\r\n    };\r\n\r\n    performAuthCheck();\r\n  }, [pathname, redirectTo, showNotification, notificationMessage, router, enqueueSnackbar, checkAuth]);\r\n\r\n  // Show fallback while checking auth\r\n  if (isChecking) {\r\n    return fallback as React.ReactElement;\r\n  }\r\n\r\n  // If on login page, always render children\r\n  if (pathname === redirectTo) {\r\n    return <>{children}</>;\r\n  }\r\n\r\n  // Only render children if authenticated\r\n  if (isLoggedIn) {\r\n    return <>{children}</>;\r\n  }\r\n\r\n  // Return fallback if not authenticated\r\n  return fallback as React.ReactElement;\r\n};\r\n\r\n/**\r\n * Higher-order component version of AuthGuard\r\n */\r\nexport function withAuthGuard<P extends object>(\r\n  Component: React.ComponentType<P>,\r\n  options?: Omit<AuthGuardProps, 'children'>\r\n) {\r\n  return function AuthGuardedComponent(props: P) {\r\n    return (\r\n      <AuthGuard {...options}>\r\n        <Component {...props} />\r\n      </AuthGuard>\r\n    );\r\n  };\r\n}"],"names":[],"mappings":";;;;;;;AACA;AACA;AACA;AAEA;;;AALA;;;;;AAeO,MAAM,YAAsC,CAAC,EAClD,QAAQ,EACR,WAAW,IAAI,EACf,aAAa,QAAQ,EACrB,mBAAmB,IAAI,EACvB,sBAAsB,mCAAmC,EAC1D;;IACC,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,WAAW,IAAA,oJAAW;IAC5B,MAAM,EAAE,eAAe,EAAE,GAAG,IAAA,+JAAW;IACvC,MAAM,EAAE,UAAU,EAAE,SAAS,EAAE,GAAG,IAAA,oJAAO;IACzC,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAC;IAE7C,IAAA,0KAAS;+BAAC;YACR,MAAM;wDAAmB;oBACvB,iCAAiC;oBACjC,IAAI,aAAa,YAAY;wBAC3B,cAAc;wBACd;oBACF;oBAEA,MAAM,gBAAgB;oBAEtB,IAAI,CAAC,eAAe;wBAClB,IAAI,kBAAkB;4BACpB,gBAAgB,qBAAqB;gCACnC,SAAS;gCACT,kBAAkB;4BACpB;wBACF;wBAEA,yBAAyB;wBACzB,OAAO,OAAO,CAAC;wBACf;oBACF;oBAEA,cAAc;gBAChB;;YAEA;QACF;8BAAG;QAAC;QAAU;QAAY;QAAkB;QAAqB;QAAQ;QAAiB;KAAU;IAEpG,oCAAoC;IACpC,IAAI,YAAY;QACd,OAAO;IACT;IAEA,2CAA2C;IAC3C,IAAI,aAAa,YAAY;QAC3B,qBAAO;sBAAG;;IACZ;IAEA,wCAAwC;IACxC,IAAI,YAAY;QACd,qBAAO;sBAAG;;IACZ;IAEA,uCAAuC;IACvC,OAAO;AACT;GA3Da;;QAOI,kJAAS;QACP,oJAAW;QACA,+JAAW;QACL,oJAAO;;;KAV9B;AAgEN,SAAS,cACd,SAAiC,EACjC,OAA0C;IAE1C,OAAO,SAAS,qBAAqB,KAAQ;QAC3C,qBACE,6LAAC;YAAW,GAAG,OAAO;sBACpB,cAAA,6LAAC;gBAAW,GAAG,KAAK;;;;;;;;;;;IAG1B;AACF"}},
    {"offset": {"line": 303, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projekts/Projekts/NEXUS_ADMIN_ORG_GIT/components/auth/protected-route.tsx"],"sourcesContent":["\"use client\";\r\nimport React from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useSnackbar } from 'notistack';\r\nimport { isAuthenticated } from '@/lib/auth';\r\n\r\ninterface ProtectedRouteProps {\r\n  children: React.ReactNode;\r\n  fallback?: React.ReactNode;\r\n  redirectTo?: string;\r\n  showNotification?: boolean;\r\n  notificationMessage?: string;\r\n}\r\n\r\n/**\r\n * A lightweight, fast route protection component\r\n * This performs immediate client-side checks without API calls\r\n */\r\nexport const ProtectedRoute: React.FC<ProtectedRouteProps> = ({\r\n  children,\r\n  fallback = <div className=\"flex items-center justify-center min-h-screen\">Loading...</div>,\r\n  redirectTo = '/login',\r\n  showNotification = true,\r\n  notificationMessage = 'Unauthorized! Please login first.',\r\n}) => {\r\n  const router = useRouter();\r\n  const { enqueueSnackbar } = useSnackbar();\r\n\r\n  // Perform immediate auth check\r\n  React.useLayoutEffect(() => {\r\n    const checkAuthentication = () => {\r\n      // Fast localStorage check - no API calls\r\n      if (!isAuthenticated()) {\r\n        if (showNotification) {\r\n          enqueueSnackbar(notificationMessage, { \r\n            variant: 'error',\r\n            preventDuplicate: true,\r\n            autoHideDuration: 3000\r\n          });\r\n        }\r\n        \r\n        // Immediate redirect\r\n        router.replace(redirectTo);\r\n        return false;\r\n      }\r\n      return true;\r\n    };\r\n\r\n    checkAuthentication();\r\n  }, [router, redirectTo, showNotification, notificationMessage, enqueueSnackbar]);\r\n\r\n  // If not authenticated, don't render children\r\n  if (!isAuthenticated()) {\r\n    return fallback as React.ReactElement;\r\n  }\r\n\r\n  // Render protected content\r\n  return <>{children}</>;\r\n};\r\n\r\n/**\r\n * Hook for programmatic auth checks in components\r\n */\r\nexport const useAuthCheck = () => {\r\n  const router = useRouter();\r\n  const { enqueueSnackbar } = useSnackbar();\r\n\r\n  const requireAuth = (\r\n    redirectTo: string = '/login',\r\n    message: string = 'Please login to continue'\r\n  ): boolean => {\r\n    if (!isAuthenticated()) {\r\n      enqueueSnackbar(message, { variant: 'error' });\r\n      router.push(redirectTo);\r\n      return false;\r\n    }\r\n    return true;\r\n  };\r\n\r\n  return { requireAuth, isAuthenticated: isAuthenticated() };\r\n};"],"names":[],"mappings":";;;;;;;AACA;AACA;AACA;AACA;;;AAJA;;;;;AAkBO,MAAM,iBAAgD,CAAC,EAC5D,QAAQ,EACR,yBAAW,6LAAC;IAAI,WAAU;cAAgD;;;;;4CAAgB,EAC1F,aAAa,QAAQ,EACrB,mBAAmB,IAAI,EACvB,sBAAsB,mCAAmC,EAC1D;;IACC,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,EAAE,eAAe,EAAE,GAAG,IAAA,+JAAW;IAEvC,+BAA+B;IAC/B,wKAAK,CAAC,eAAe;0CAAC;YACpB,MAAM;sEAAsB;oBAC1B,yCAAyC;oBACzC,IAAI,CAAC,IAAA,iIAAe,KAAI;wBACtB,IAAI,kBAAkB;4BACpB,gBAAgB,qBAAqB;gCACnC,SAAS;gCACT,kBAAkB;gCAClB,kBAAkB;4BACpB;wBACF;wBAEA,qBAAqB;wBACrB,OAAO,OAAO,CAAC;wBACf,OAAO;oBACT;oBACA,OAAO;gBACT;;YAEA;QACF;yCAAG;QAAC;QAAQ;QAAY;QAAkB;QAAqB;KAAgB;IAE/E,8CAA8C;IAC9C,IAAI,CAAC,IAAA,iIAAe,KAAI;QACtB,OAAO;IACT;IAEA,2BAA2B;IAC3B,qBAAO;kBAAG;;AACZ;GAxCa;;QAOI,kJAAS;QACI,+JAAW;;;KAR5B;AA6CN,MAAM,eAAe;;IAC1B,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,EAAE,eAAe,EAAE,GAAG,IAAA,+JAAW;IAEvC,MAAM,cAAc,CAClB,aAAqB,QAAQ,EAC7B,UAAkB,0BAA0B;QAE5C,IAAI,CAAC,IAAA,iIAAe,KAAI;YACtB,gBAAgB,SAAS;gBAAE,SAAS;YAAQ;YAC5C,OAAO,IAAI,CAAC;YACZ,OAAO;QACT;QACA,OAAO;IACT;IAEA,OAAO;QAAE;QAAa,iBAAiB,IAAA,iIAAe;IAAG;AAC3D;IAjBa;;QACI,kJAAS;QACI,+JAAW"}}]
}